<%- include("../partials/head.ejs")%>

    <body>
        <%- include("../partials/navbar.ejs") %>


            <div class="col-lg-11 mx-auto mb-3 mt-5 listtable mt-2">
                <div class="card rounded shadow listtable">
                    <div class="container">
                        <div class="row text-center ">
                            <div class="col-7 col-sm-7 mt-4 text-end ">
                                <a style="font-size: xx-large;">Student List</a>
                            </div>
                            <div class="col-5 col-sm-5 mt-4  ">
                                <a href="teacher/add" type="button" class="btn btn-primary  ms-5 ">Add
                                    Result </a>
                            </div>
                        </div>
                    </div>
                    <div class="card-body rounded">
                        <div class="table-responsive" style="max-height: 300px;">
                            <% if (results.length>0) { %>
                                <table id="myTable" style="width:100%;" class=" table table-bordered">

                                    <thead class="text-center">

                                        <tr>
                                            <th> Roll Number</th>
                                            <th> Name</th>
                                            <th>Date of Birth</th>
                                            <th>Score</th>
                                            <th>Actions</th>
                                        </tr>

                                    </thead>
                                    <tbody class="text-center">

                                        <% results.forEach(element=> { %>
                                            <tr>
                                                <td>
                                                    <%= element.rollNumber %>
                                                </td>
                                                <td>
                                                    <%= element.studentName %>
                                                </td>
                                                <td>
                                                    <%= element.dateOfBirth %>
                                                </td>
                                                <td>
                                                    <%= element.score %>
                                                </td>
                                                <td>
                                                    <a type="button" href="teacher/edit/<%=element.rollNumber %>"
                                                        class=" edit btn btn-outline-primary">Edit</a>
                                                    <button type="button" value=<%=element.rollNumber %>
                                                        class=" delete btn btn-outline-primary">Delete</button>
                                                </td>
                                            </tr>
                                            <% }) %>
                                                <% } else { %>
                                                    <h1 class="text-center">Please Add Result </h1>
                                                    <% } %>

                                    </tbody>
                                </table>

                        </div>
                    </div>
                </div>
            </div>


            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
                crossorigin="anonymous"></script>
            <footer>

                <p>Copyrigth 2022-2023</p>
            </footer>
    </body>
    <script>
        $(document).ready(function () {

            $(document).on("click", ".delete", function () {
                var id = $(this).val();
                console.log(id + " here")
                if (confirm('Did you really want to delete?')) {
                    $.ajax({
                        type: 'DELETE',
                        url: 'teacher/delete/' + id,
                        success: function (data) {
                            window.location = data

                        }
                    })
                }
            })
        })
    </script>

    </html>